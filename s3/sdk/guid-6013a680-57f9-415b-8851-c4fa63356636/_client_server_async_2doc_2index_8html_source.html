<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"></meta>
<title>TB9.2 Example Applications: examples/S60CppExamples/ClientServerAsync/doc/index.html Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"></link>
<link href="doxygen.css" rel="stylesheet" type="text/css"></link>
<link type="text/css" rel="stylesheet" href="../css/common.css" media="screen"></link>
<link type="text/css" rel="stylesheet" href="../css/sdl.css" media="screen"></link>

<!--[if IE]>
<link href="../css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
</head>
<body class="kernelguide">
    
     <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Product Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
      
    </div>
    <script type="text/javascript">
     var currentIconMode = 0;
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<!-- Generated by Doxygen 1.6.2 -->
<h1>examples/S60CppExamples/ClientServerAsync/doc/index.html</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <!DOCTYPE HTML PUBLIC <span class="stringliteral">"-//W3C//DTD HTML 4.0 Transitional//EN"</span>>
<a name="l00002"></a>00002 <html>
<a name="l00003"></a>00003 
<a name="l00004"></a>00004 <head>
<a name="l00005"></a>00005 <meta http-equiv=<span class="stringliteral">"Content-Type"</span> content=<span class="stringliteral">"text/html;charset=iso-8859-1"</span>>
<a name="l00006"></a>00006 <title>Asynchronous Client/Server Example</title>
<a name="l00007"></a>00007 <link href=<span class="stringliteral">"style.css"</span> rel=<span class="stringliteral">"stylesheet"</span> type=<span class="stringliteral">"text/css"</span>>
<a name="l00008"></a>00008 </head>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <table border=<span class="stringliteral">"0"</span> width=<span class="stringliteral">"100%"</span> height=<span class="stringliteral">"8"</span> bgcolor=<span class="stringliteral">"#eeeeee"</span>>
<a name="l00011"></a>00011 <tr> <td width=<span class="stringliteral">"100%"</span> height=<span class="stringliteral">"1"</span>><b><font size=<span class="stringliteral">"2"</span> color=<span class="stringliteral">"#000000"</span> face=<span class="stringliteral">"Arial, Helvetica, sans-serif"</span>><strong><a name=Top></a>
<a name="l00012"></a>00012 S60 5th Edition SDK </strong></font></b><br><i>Example Applications Guide</i></td></tr> </table>
<a name="l00013"></a>00013 <!-- Generated by Doxygen 1.4.5 -->
<a name="l00014"></a>00014 <div <span class="keyword">class</span>=<span class="stringliteral">"tabs"</span>>
<a name="l00015"></a>00015   <ul>
<a name="l00016"></a>00016     <li <span class="keywordtype">id</span>=<span class="stringliteral">"current"</span>><a href=<span class="stringliteral">"index.html"</span>><span>Main&nbsp;Page</span></a></li>
<a name="l00017"></a>00017     <li><a href=<span class="stringliteral">"annotated.html"</span>><span>Classes</span></a></li>
<a name="l00018"></a>00018     <li><a href=<span class="stringliteral">"files.html"</span>><span>Files</span></a></li>
<a name="l00019"></a>00019   </ul></div>
<a name="l00020"></a>00020 <h1>Asynchronous Client/Server Example</h1>
<a name="l00021"></a>00021 <p>
<a name="l00022"></a>00022 <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"index.html#Intro_sec"</span>>1. About <span class="keyword">this</span> Example</a> <br>
<a name="l00023"></a>00023 <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"index.html#Arch_sec"</span>>2. Architecture</a> <br>
<a name="l00024"></a>00024 <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"index.html#Design_sec"</span>>3. Design and Implementation</a><p>
<a name="l00025"></a>00025 <hr>
<a name="l00026"></a>00026 <h2><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Intro_sec"</span>>
<a name="l00027"></a>00027 1. About <span class="keyword">this</span> Example</a></h2>
<a name="l00028"></a>00028 This example demonstrates the architecture of a simple client server application utilising asynchronous calls to the server. The server supplies the current time to its clients.<p>
<a name="l00029"></a>00029 <hr>
<a name="l00030"></a>00030 <h3><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub11"</span>>
<a name="l00031"></a>00031 1.1 APIs demonstrated</a></h3>
<a name="l00032"></a>00032 <ul>
<a name="l00033"></a>00033 <li>CActive</li><li>CServer2</li><li>CSession2</li><li>RMessagePtr2</li><li>RMessage2</li><li>RSessionBase</li></ul>
<a name="l00034"></a>00034 <p>
<a name="l00035"></a>00035 <hr>
<a name="l00036"></a>00036 <h3><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub12"</span>>
<a name="l00037"></a>00037 1.2 Prerequisites</a></h3>
<a name="l00038"></a>00038 This example makes use of the standard Symbian OS application framework, comprising the Application, Document, UI, and View classes. The reader should be aware of <span class="keyword">this</span> architecture before attempting to understand <span class="keyword">this</span> example. The example makes use of several other Symbian OS concepts which the reader should be aware of before attempting to understand <span class="keyword">this</span> example. These are:<p>
<a name="l00039"></a>00039 <ul>
<a name="l00040"></a>00040 <li>Asynchronous programming, in particular the following topics:<ul>
<a name="l00041"></a>00041 <li>Inter-process communication overview.</li><li>Client/server overview.</li><li>Using client/server.</li><li>CActive</li></ul>
<a name="l00042"></a>00042 </li></ul>
<a name="l00043"></a>00043 <p>
<a name="l00044"></a>00044 <ul>
<a name="l00045"></a>00045 <li>Thread and process management, in particular the following topics:<ul>
<a name="l00046"></a>00046 <li>Thread and process management overview.</li><li>Semaphores overview.</li><li>Threads and processes overview.</li><li>Using semaphores.</li></ul>
<a name="l00047"></a>00047 </li></ul>
<a name="l00048"></a>00048 <p>
<a name="l00049"></a>00049 <hr>
<a name="l00050"></a>00050 <h3><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub13"</span>>
<a name="l00051"></a>00051 1.3 Running <span class="keyword">this</span> example</a></h3>
<a name="l00052"></a>00052 The application initially presents a <span class="keywordflow">default</span> time to the user, as shown in the following screenshot.<p>
<a name="l00053"></a>00053 <div align=<span class="stringliteral">"center"</span>>
<a name="l00054"></a>00054 <img src=<span class="stringliteral">"initial_screen.png"</span> alt=<span class="stringliteral">"initial_screen.png"</span>>
<a name="l00055"></a>00055 </div>
<a name="l00056"></a>00056 <p>
<a name="l00057"></a>00057 The Options menu presents the following choices:<p>
<a name="l00058"></a>00058 <div align=<span class="stringliteral">"center"</span>>
<a name="l00059"></a>00059 <img src=<span class="stringliteral">"options_menu.png"</span> alt=<span class="stringliteral">"options_menu.png"</span>>
<a name="l00060"></a>00060 </div>
<a name="l00061"></a>00061 <p>
<a name="l00062"></a>00062 <ul>
<a name="l00063"></a>00063 <li>Select <b>Start Clock</b> to start updating the displayed time.</li><li>Select <b>Exit</b> at any time, to exit the application.</li></ul>
<a name="l00064"></a>00064 <p>
<a name="l00065"></a>00065 On selecting <b>Start Clock</b>, the display will be updated periodically with the current time. While the clock is running, the Options menu presents the following choices:<p>
<a name="l00066"></a>00066 <div align=<span class="stringliteral">"center"</span>>
<a name="l00067"></a>00067 <img src=<span class="stringliteral">"options_menu_running.png"</span> alt=<span class="stringliteral">"options_menu_running.png"</span>>
<a name="l00068"></a>00068 </div>
<a name="l00069"></a>00069 <p>
<a name="l00070"></a>00070 <ul>
<a name="l00071"></a>00071 <li>Select <b>Stop Clock</b> to stop updating the displayed time.</li><li>Select <b>Exit</b> at any time, to exit the application.</li></ul>
<a name="l00072"></a>00072 <p>
<a name="l00073"></a>00073 <hr>
<a name="l00074"></a>00074 <h2><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Arch_sec"</span>>
<a name="l00075"></a>00075 2. Architecture</a></h2>
<a name="l00076"></a>00076 This example exists as a complete application and has the standard Symbian OS application architecture employing the Application, Document, UI, and View classes. The reader should be familiar with <span class="keyword">this</span> architecture before proceeding.<p>
<a name="l00077"></a>00077 <hr>
<a name="l00078"></a>00078 <h2><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Design_sec"</span>>
<a name="l00079"></a>00079 3. Design and Implementation</a></h2>
<a name="l00080"></a>00080 The following component diagram illustrates the split of classes over the client and server components, and their inter-relationships.<p>
<a name="l00081"></a>00081 <div align=<span class="stringliteral">"center"</span>>
<a name="l00082"></a>00082 <img src=<span class="stringliteral">"component.jpg"</span> alt=<span class="stringliteral">"component.jpg"</span>>
<a name="l00083"></a>00083 </div>
<a name="l00084"></a>00084 <p>
<a name="l00085"></a>00085 The client is a standard Symbian OS application, utilising an RSessionBase-derived <span class="keywordtype">object</span> to communicate with the server. The server is implemented as an EXE.<p>
<a name="l00086"></a>00086 In the following description, an overview of <span class="keyword">this</span> example<span class="stringliteral">'s design is presented in the Design overview section. This is followed by a description of three use case scenarios, where the user:<p></span>
<a name="l00087"></a>00087 <span class="stringliteral"><ul></span>
<a name="l00088"></a>00088 <span class="stringliteral"><li>Invokes the application - here, the application establishes communication with the server, creating the server if necessary. This is achieved using the <a class="el" href="class_r_time_server_session.html">RTimeServerSession</a> class, and is described in the Creating a session section.</li><li>Makes a server request - the application uses the established session to request data from the server. This is described in the Making a server request section.</li><li>Cancels a server request - the user cancels an outstanding request. This is described in the Canceling a server request section.</li></ul></span>
<a name="l00089"></a>00089 <span class="stringliteral"><p></span>
<a name="l00090"></a>00090 <span class="stringliteral"><hr></span>
<a name="l00091"></a>00091 <span class="stringliteral"><h3><a class="anchor" name="Sub31"></span>
<a name="l00092"></a>00092 <span class="stringliteral">3.1 Design overview</a></h3></span>
<a name="l00093"></a>00093 <span class="stringliteral">The Symbian OS client/server architecture uses four key concepts: server (CServer2), session (CSession2 and RSessionBase), sub-session (RSubSessionBase), and message (RMessage2, and RMessagePtr2).<p></span>
<a name="l00094"></a>00094 <span class="stringliteral">Servers derive from CServer2, and are responsible for handling any requests from clients to establish connections.<p></span>
<a name="l00095"></a>00095 <span class="stringliteral">The session represents the channel of communication between client and server. Clients use a derivation of RSessionBase, and servers use a derivation from CSession2.<p></span>
<a name="l00096"></a>00096 <span class="stringliteral">The following class diagram shows the server-session associations for this example.<p></span>
<a name="l00097"></a>00097 <span class="stringliteral"><div align="center"></span>
<a name="l00098"></a>00098 <span class="stringliteral"><img src="classes.png" alt="classes.png"></span>
<a name="l00099"></a>00099 <span class="stringliteral"></div></span>
<a name="l00100"></a>00100 <span class="stringliteral"><p></span>
<a name="l00101"></a>00101 <span class="stringliteral">A client can create multiple sessions with a server. However, it is more resource-efficient to use sub-sessions. This feature is not employed in this example, for simplicity.<p></span>
<a name="l00102"></a>00102 <span class="stringliteral">The RMessage2 class is the data structure passed between client and server. The client does not manipulate this directly, as it is encapsulated in the client-side interface. Server side sessions read from, and write to, this structure to receive and send data.<p></span>
<a name="l00103"></a>00103 <span class="stringliteral">To handle asynchronous services, the client requires the use of an active object. In this case, the active object is an instance of the <a class="el" href="class_c_c_s_async_request_handler.html">CCSAsyncRequestHandler</a> class. This is responsible for managing the asynchronous nature of this example. It issues requests (through the <a class="el" href="class_r_time_server_session.html">RTimeServerSession</a> class) for asynchronous services, and receives notification of completion through its RunL method. It uses an observer, <a class="el" href="class_m_async_time_observer.html">MAsyncTimeObserver</a>, to report the completion of requests to interested parties.<p></span>
<a name="l00104"></a>00104 <span class="stringliteral"><hr></span>
<a name="l00105"></a>00105 <span class="stringliteral"><h3><a class="anchor" name="Sub32"></span>
<a name="l00106"></a>00106 <span class="stringliteral">3.2 Creating a session</a></h3></span>
<a name="l00107"></a>00107 <span class="stringliteral">The sequence involved in creating a session is very similar to that described in the Synchronous Client/Server Example, and hence is not described in this document. The only differences in this case are that the session is created by the <a class="el" href="class_c_c_s_async_request_handler.html">CCSAsyncRequestHandler</a> class, and the number of asynchronous message slots specified in the RSessionBase::Connect call is no longer zero.<p></span>
<a name="l00108"></a>00108 <span class="stringliteral"><hr></span>
<a name="l00109"></a>00109 <span class="stringliteral"><h3><a class="anchor" name="Sub33"></span>
<a name="l00110"></a>00110 <span class="stringliteral">3.3 Making a server request</a></h3></span>
<a name="l00111"></a>00111 <span class="stringliteral">The RMessage2 and RMessagePtr2 classes are used to transfer information between the client and the server. These classes have several useful methods:<p></span>
<a name="l00112"></a>00112 <span class="stringliteral"><ul></span>
<a name="l00113"></a>00113 <span class="stringliteral"><li>RMessage2 allows client to specify the required server operation.</li><li>RMessage2 allows four 32-bit words of information to be passed back and forth between the client and server.</li><li>RMessagePtr2 allows the server to signal when a client'</span>s request has completed, <span class="keyword">using</span> the Complete method.</li><li>RMessagePtr2 allows the server to panic its client.</li></ul>
<a name="l00114"></a>00114 <p>
<a name="l00115"></a>00115 An instance of an RMessage2 <span class="keywordtype">object</span> is automatically created <span class="keywordflow">for</span> the session when the client calls one of the RSessionBase::SendReceive or RSessionBase::Send methods. These methods can take a parameter that is a reference to TIpcArgs object, which can have up to four 32-bit arguments.<p>
<a name="l00116"></a>00116 The sequence involved in making an asynchronous server request is shown below.<p>
<a name="l00117"></a>00117 <div align=<span class="stringliteral">"center"</span>>
<a name="l00118"></a>00118 <img src=<span class="stringliteral">"requesttime.jpg"</span> alt=<span class="stringliteral">"requesttime.jpg"</span>>
<a name="l00119"></a>00119 </div>
<a name="l00120"></a>00120 <p>
<a name="l00121"></a>00121 <ol type=1>
<a name="l00122"></a>00122 <li>RequestTime is called in response to the user selecting Start Clock. This calls <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_c_s_async_request_handler.html#481d63e2f4e33b9cb8ed4680a965da25"</span>><a class="code" href="class_c_c_s_async_request_handler.html#ad34e374499b67c21347c5f87f7911324">CCSAsyncRequestHandler::RequestTime</a></a>.</li><li>The <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_r_time_server_session.html#0e65b7c45b7af042183f1c5525cfcc1b"</span>><a class="code" href="class_r_time_server_session.html#a456203c7ad8889a4753222e98173ff00">RTimeServerSession::RequestTime</a></a> is called and a TTime reference, and the active <span class="keywordtype">object</span><span class="stringliteral">'s iStatus flag are passed to it.</li><li>A descriptor is now created, representing the supplied TTime object. This descriptor'</span>s address is entered into the TIpcArgs object, which is passed to the inherited SendReceive method. SendReceive is an asynchronous method, and returns immediately.</li><li>The SetActive method is called, to indicate that the active <span class="keywordtype">object</span> has issued a request that is now outstanding. <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_c_s_async_request_handler.html#98dcd20e4dd117488a6a90dadd4dfac5"</span>><a class="code" href="class_c_c_s_async_request_handler.html#a68039f23cd042511b6911beeec532a0f">CCSAsyncRequestHandler::RunL</a></a> will be called when the server completes the request.</li></ol>
<a name="l00123"></a>00123 <p>
<a name="l00124"></a>00124 As a result of the call to SendReceive, the framework calls the <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_time_server_session.html#75c0a1442736b57144c9ad541d87d370"</span>><a class="code" href="class_c_time_server_session.html#a0fd8da10042e0e7c97a74eef7f1fe413">CTimeServerSession::ServiceL</a></a> of the associated server-side session, as shown in the following diagram.<p>
<a name="l00125"></a>00125 <div align=<span class="stringliteral">"center"</span>>
<a name="l00126"></a>00126 <img src=<span class="stringliteral">"servicel.png"</span> alt=<span class="stringliteral">"servicel.png"</span>>
<a name="l00127"></a>00127 </div>
<a name="l00128"></a>00128 <p>
<a name="l00129"></a>00129 <ol type=1>
<a name="l00130"></a>00130 <li><a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_time_server_session.html#75c0a1442736b57144c9ad541d87d370"</span>><a class="code" href="class_c_time_server_session.html#a0fd8da10042e0e7c97a74eef7f1fe413">CTimeServerSession::ServiceL</a></a> is called by the kernel, and passed an RMessage2 encapsulating the client<span class="stringliteral">'s request.</li><li>RMessage2::Function is called to determine the request type.</li><li>If the request is for a time update, RequestTimeL is called.</li><li>The received request (RMessage2) is stored. The session now registers its interest in the server'</span>s time updates by calling <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_time_server.html#a8205372b5d379fa4b803e98b0726473"</span>><a class="code" href="class_c_time_server.html#a6787f6b173c59446b202ae04177a5d88">CTimeServer::WaitForTickL</a></a>.</li><li>The server uses an instance of the CHeartbeat <span class="keyword">class </span>to notify sessions of a time update. New instance is created here if the heartbeat is not already created.</li><li>The heartbeat is also started, if it was not already created in previous step.</li><li>When the next heartbeat occurs, <a class=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_time_server.html#8bc39d8613772fe04fa5d6a845ede8cd"</span>><a class="code" href="class_c_time_server.html#aaf1149f0fedf24e384705ce734d6d7fe">CTimeServer::Beat</a></a> is called.</li><li>The Beat function calls SendTimeToSessions, which iterates over all established sessions, calling <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_time_server_session.html#ecff8e289d914777ae0c503db937cf33"</span>><a class="code" href="class_c_time_server_session.html#a5db282a872864d62b94a2a6a25159d5f">CTimeServerSession::SendTimeToClient</a></a>.</li><li>SendTimeToClient is called.</li><li>SendTimeToClient calculates the current time and creates a <span class="keyword">new</span> descriptor representing it (<span class="keyword">using</span> TPtr8 since it<span class="stringliteral">'s binary data). RMessage2::WriteL is now called, with the created descriptor as parameter. First parameter of the WriteL is zero identifying the argument index value. The descriptor at the client side was the first argument, so server has to write into the first argument (index 0). If server writes to index 1, in this case, WriteL would return error KErrBadDescriptor. The WriteL function call causes the time to be written to the client'</span>s address space.</li><li>The server session then signals the client, <span class="keyword">using</span> the RMessage2::Complete method. This causes the client<span class="stringliteral">'s <a class="el" href="class_c_c_s_async_request_handler.html#98dcd20e4dd117488a6a90dadd4dfac5">CCSAsyncRequestHandler::RunL</a> method to be called, as shown in the following diagram.</li></ol></span>
<a name="l00131"></a>00131 <span class="stringliteral"><p></span>
<a name="l00132"></a>00132 <span class="stringliteral">Once the server has completed the request, the active object which initiated the request will be signalled, and its RunL method called, as shown in the following diagram.<p></span>
<a name="l00133"></a>00133 <span class="stringliteral"><div align="center"></span>
<a name="l00134"></a>00134 <span class="stringliteral"><img src="runl.jpg" alt="runl.jpg"></span>
<a name="l00135"></a>00135 <span class="stringliteral"></div></span>
<a name="l00136"></a>00136 <span class="stringliteral"><p></span>
<a name="l00137"></a>00137 <span class="stringliteral"><ol type=1></span>
<a name="l00138"></a>00138 <span class="stringliteral"><li>The active scheduler calls the RunL method in response to the server completing the request.</li><li>The observer is notified and the time is updated to the screen if the status flag indicates successful completion of the request.</li><li>A new request is scheduled, to keep the clock '</span>running<span class="stringliteral">'.</li></ol></span>
<a name="l00139"></a>00139 <span class="stringliteral"><p></span>
<a name="l00140"></a>00140 <span class="stringliteral"><hr></span>
<a name="l00141"></a>00141 <span class="stringliteral"><h3><a class="anchor" name="Sub34"></span>
<a name="l00142"></a>00142 <span class="stringliteral">3.4 Canceling a server request</a></h3></span>
<a name="l00143"></a>00143 <span class="stringliteral">When the user selects Stop Clock, the following sequence is entered.<p></span>
<a name="l00144"></a>00144 <span class="stringliteral"><div align="center"></span>
<a name="l00145"></a>00145 <span class="stringliteral"><img src="cancel.jpg" alt="cancel.jpg"></span>
<a name="l00146"></a>00146 <span class="stringliteral"></div></span>
<a name="l00147"></a>00147 <span class="stringliteral"><p></span>
<a name="l00148"></a>00148 <span class="stringliteral"><ol type=1></span>
<a name="l00149"></a>00149 <span class="stringliteral"><li>CancelRequest is called in response to the user selecting Stop Clock from the Options menu.</li><li>To handle cancelled requests, active objects should call CActive::Cancel and also implement a DoCancel method. This will be called as a result of calling CActive::Cancel.</li><li>DoCancel is called, which instructs the session to cancel the outstanding request by calling <a class="el" href="class_r_time_server_session.html#52a5f2cddd36f215fea9c11e32ab88b8">RTimeServerSession::CancelRequestTime</a>.</li><li>CancelRequestTime() is called.</li><li>The synchronous request is now sent to the server, instructing it to cancel the outstanding request by calling SendReceive. The framework will call the corresponding server-side session'</span>s ServiceL method as shown in the following sequence.</li></ol>
<a name="l00150"></a>00150 <p>
<a name="l00151"></a>00151 As a result of the call to SendReceive, the framework calls the <a class="el" href="class_c_time_server_session.html#75c0a1442736b57144c9ad541d87d370">CTimeServerSession::ServiceL</a> of the associated server-side session, as shown in the following diagram.<p>
<a name="l00152"></a>00152 <div align=<span class="stringliteral">"center"</span>>
<a name="l00153"></a>00153 <img src=<span class="stringliteral">"servicel-cancel.png"</span> alt=<span class="stringliteral">"servicel-cancel.png"</span>>
<a name="l00154"></a>00154 </div>
<a name="l00155"></a>00155 <p>
<a name="l00156"></a>00156 <ol type=1>
<a name="l00157"></a>00157 <li>ServiceL is called by the framework in response to a request from the client.</li><li>The requested method is checked by examining the returned <span class="keywordtype">id</span> from RMessage2::Function. In <span class="keyword">this</span> <span class="keywordflow">case</span>, it indicates that the client has requested cancellation of an outstanding request. The servicing of <span class="keyword">this</span> request should complete in as <span class="keywordtype">short</span> a time as possible, since the client waits <span class="keywordflow">for</span> completion.</li><li>If a previous request is pending, the server completes it by calling Complete on the stored request<span class="stringliteral">'s associated RMessage2.</li><li>The cancellation request is now completed, freeing the client to continue processing.</li></ol></span>
<a name="l00158"></a>00158 <span class="stringliteral"><p></span>
<a name="l00159"></a>00159 <span class="stringliteral"><hr></span>
<a name="l00160"></a>00160 <span class="stringliteral"><h3><a class="anchor" name="Sub35"></span>
<a name="l00161"></a>00161 <span class="stringliteral">3.5 Capabilities</a></h3></span>
<a name="l00162"></a>00162 <span class="stringliteral">The application does not require any capabilities. The program capabilities are defined in both mmp-files as CAPABILITY NONE. <hr></span>
<a name="l00163"></a>00163 <span class="stringliteral"></span>
<a name="l00164"></a>00164 <span class="stringliteral"><table x-use-null-cells</span>
<a name="l00165"></a>00165 <span class="stringliteral">                style="x-cell-content-align: top;</span>
<a name="l00166"></a>00166 <span class="stringliteral">                                width: 100%;</span>
<a name="l00167"></a>00167 <span class="stringliteral">                                border-spacing: 0px;</span>
<a name="l00168"></a>00168 <span class="stringliteral">                                border-spacing: 0px;"</span>
<a name="l00169"></a>00169 <span class="stringliteral">                cellspacing=0</span>
<a name="l00170"></a>00170 <span class="stringliteral">                width=100%></span>
<a name="l00171"></a>00171 <span class="stringliteral">  <col style="width: 50%;"></span>
<a name="l00172"></a>00172 <span class="stringliteral">  <col style="width: 50%;"></span>
<a name="l00173"></a>00173 <span class="stringliteral"></span>
<a name="l00174"></a>00174 <span class="stringliteral">  <tr style="x-cell-content-align: top;"</span>
<a name="l00175"></a>00175 <span class="stringliteral">        valign=top></span>
<a name="l00176"></a>00176 <span class="stringliteral">  <td style="width: 50%;</span>
<a name="l00177"></a>00177 <span class="stringliteral">                        padding-right: 10px;</span>
<a name="l00178"></a>00178 <span class="stringliteral">                        padding-left: 10px;</span>
<a name="l00179"></a>00179 <span class="stringliteral">                        border-right-style: None;</span>
<a name="l00180"></a>00180 <span class="stringliteral">                        border-left-style: None;</span>
<a name="l00181"></a>00181 <span class="stringliteral">                        border-top-style: None;</span>
<a name="l00182"></a>00182 <span class="stringliteral">                        border-bottom-style: None;"</span>
<a name="l00183"></a>00183 <span class="stringliteral">        width=50%></span>
<a name="l00184"></a>00184 <span class="stringliteral">  <p style="font-family: Arial;"><small style="font-size: smaller;"> Nokia 2009</small></td></span>
<a name="l00185"></a>00185 <span class="stringliteral">  <td style="width: 50%;</span>
<a name="l00186"></a>00186 <span class="stringliteral">                        padding-right: 10px;</span>
<a name="l00187"></a>00187 <span class="stringliteral">                        padding-left: 10px;</span>
<a name="l00188"></a>00188 <span class="stringliteral">                        border-top-style: None;</span>
<a name="l00189"></a>00189 <span class="stringliteral">                        border-bottom-style: None;</span>
<a name="l00190"></a>00190 <span class="stringliteral">                        border-right-style: None;"</span>
<a name="l00191"></a>00191 <span class="stringliteral">        width=50%></span>
<a name="l00192"></a>00192 <span class="stringliteral">  <p style="text-align: right; margin-right: -4px;"</span>
<a name="l00193"></a>00193 <span class="stringliteral">        align=right><span style="font-weight: bold;"><a href="#Top"</span>
<a name="l00194"></a>00194 <span class="stringliteral">                                                                                                        title="Back to top"><img</span>
<a name="l00195"></a>00195 <span class="stringliteral"> src="top.gif"</span>
<a name="l00196"></a>00196 <span class="stringliteral">        x-maintain-ratio=TRUE</span>
<a name="l00197"></a>00197 <span class="stringliteral">        alt="Back to top"</span>
<a name="l00198"></a>00198 <span class="stringliteral">        style="border: none;</span>
<a name="l00199"></a>00199 <span class="stringliteral">                        width: 18px;</span>
<a name="l00200"></a>00200 <span class="stringliteral">                        height: 15px;</span>
<a name="l00201"></a>00201 <span class="stringliteral">                        float: none;</span>
<a name="l00202"></a>00202 <span class="stringliteral">                        border-style: none;</span>
<a name="l00203"></a>00203 <span class="stringliteral">                        border-style: none;"</span>
<a name="l00204"></a>00204 <span class="stringliteral">        width=18</span>
<a name="l00205"></a>00205 <span class="stringliteral">        height=15</span>
<a name="l00206"></a>00206 <span class="stringliteral">        border=0></a></span></td></tr></span>
<a name="l00207"></a>00207 <span class="stringliteral"> </table></span>
<a name="l00208"></a>00208 <span class="stringliteral"></body></span>
<a name="l00209"></a>00209 <span class="stringliteral"></html></span>
<a name="l00210"></a>00210 <span class="stringliteral"></span>
</pre></div>
<hr size="1"></hr><address style="text-align: right;"><small>Generated by 
<a href="https://web.archive.org/web/20110000000000*/http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"></img></a> 1.6.2 </small></address>
     <p class="copyright">Copyright ©2010 Nokia Corporation and/or its subsidiary(-ies).<br></br> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>
