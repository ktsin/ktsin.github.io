<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"></meta>
<title>TB9.2 Example Applications: examples/S60CppExamples/helloworldbasic/doc/index.html Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"></link>
<link href="doxygen.css" rel="stylesheet" type="text/css"></link>
<link type="text/css" rel="stylesheet" href="../css/common.css" media="screen"></link>
<link type="text/css" rel="stylesheet" href="../css/sdl.css" media="screen"></link>

<!--[if IE]>
<link href="../css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->


</head>
<body class="kernelguide">
    
     <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Product Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
      
    </div>
    <script type="text/javascript">
     var currentIconMode = 0;
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<!-- Generated by Doxygen 1.6.2 -->
<h1>examples/S60CppExamples/helloworldbasic/doc/index.html</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <!DOCTYPE HTML PUBLIC <span class="stringliteral">"-//W3C//DTD HTML 4.0 Transitional//EN"</span>>
<a name="l00002"></a>00002 <html>
<a name="l00003"></a>00003 
<a name="l00004"></a>00004 <head>
<a name="l00005"></a>00005 <meta http-equiv=<span class="stringliteral">"Content-Type"</span> content=<span class="stringliteral">"text/html;charset=iso-8859-1"</span>>
<a name="l00006"></a>00006 <title>Hello World Basic Example</title>
<a name="l00007"></a>00007 <link href=<span class="stringliteral">"style.css"</span> rel=<span class="stringliteral">"stylesheet"</span> type=<span class="stringliteral">"text/css"</span>>
<a name="l00008"></a>00008 </head>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <table border=<span class="stringliteral">"0"</span> width=<span class="stringliteral">"100%"</span> height=<span class="stringliteral">"8"</span> bgcolor=<span class="stringliteral">"#eeeeee"</span>>
<a name="l00011"></a>00011 <tr> <td width=<span class="stringliteral">"100%"</span> height=<span class="stringliteral">"1"</span>><b><font size=<span class="stringliteral">"2"</span> color=<span class="stringliteral">"#000000"</span> face=<span class="stringliteral">"Arial, Helvetica, sans-serif"</span>><strong><a name=Top></a>
<a name="l00012"></a>00012 S60 5th Edition SDK </strong></font></b><br><i>Example Applications Guide</i></td></tr> </table>
<a name="l00013"></a>00013 <!-- Generated by Doxygen 1.4.5 -->
<a name="l00014"></a>00014 <div <span class="keyword">class</span>=<span class="stringliteral">"tabs"</span>>
<a name="l00015"></a>00015   <ul>
<a name="l00016"></a>00016     <li <span class="keywordtype">id</span>=<span class="stringliteral">"current"</span>><a href=<span class="stringliteral">"index.html"</span>><span>Main&nbsp;Page</span></a></li>
<a name="l00017"></a>00017     <li><a href=<span class="stringliteral">"annotated.html"</span>><span>Classes</span></a></li>
<a name="l00018"></a>00018     <li><a href=<span class="stringliteral">"files.html"</span>><span>Files</span></a></li>
<a name="l00019"></a>00019   </ul></div>
<a name="l00020"></a>00020 <h1>Hello World Basic Example</h1>
<a name="l00021"></a>00021 <p>
<a name="l00022"></a>00022 <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"index.html#Intro_sec"</span>>1. About <span class="keyword">this</span> Example</a> <br>
<a name="l00023"></a>00023 <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"index.html#Arch_sec"</span>>2. Architecture</a> <br>
<a name="l00024"></a>00024 <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"index.html#Design_sec"</span>>3. Design and Implementation</a><p>
<a name="l00025"></a>00025 <hr>
<a name="l00026"></a>00026 <h2><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Intro_sec"</span>>
<a name="l00027"></a>00027 1. About <span class="keyword">this</span> Example</a></h2>
<a name="l00028"></a>00028 The Hello World Basic example demonstrates how to create a simple interactive application on Symbian OS. Although the program described here basically only displays a simple string, it can be easily adapted to make much larger applications.<p>
<a name="l00029"></a>00029 Hello World Basic application - in addition to its evident purpose to print <span class="stringliteral">"Hello World!"</span> to the screen - also demonstrates displaying text with Information Note and on to the background, loading strings with the help of StringLoader, writing to and reading from a file and use of dialog to inquire user input.<p>
<a name="l00030"></a>00030 Furthermore, Hello World Basic application is also localized to a few different languages.<h3><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub11"</span>>
<a name="l00031"></a>00031 1.1. APIs demonstrated</a></h3>
<a name="l00032"></a>00032 <ul>
<a name="l00033"></a>00033 <li>StringLoader</li><li>RFs, RFile, RFileWriteStream and RFileReadStream</li><li>CAknInformationNote</li><li>CAknTextQueryDialog</li></ul>
<a name="l00034"></a>00034 <h3><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub12"</span>>
<a name="l00035"></a>00035 1.2. Prerequisites</a></h3>
<a name="l00036"></a>00036 None.<p>
<a name="l00037"></a>00037 <hr>
<a name="l00038"></a>00038 <h2><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Arch_sec"</span>>
<a name="l00039"></a>00039 2. Architecture</a></h2>
<a name="l00040"></a>00040 HelloWorld follows traditional Symbian OS Control-based architecture.<p>
<a name="l00041"></a>00041 <hr>
<a name="l00042"></a>00042 <h2><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Design_sec"</span>>
<a name="l00043"></a>00043 3. Design and Implementation</a></h2>
<a name="l00044"></a>00044 <h3><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub31"</span>>
<a name="l00045"></a>00045 3.1 Capabilities</a></h3>
<a name="l00046"></a>00046 Hello World application does not require any capabilities. The program capabilities are defined in <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"helloworldbasic_8mmp-source.html"</span>>helloworldbasic.mmp</a> file: CAPABILITY NONE.<h3><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub32"</span>>
<a name="l00047"></a>00047 3.2 ScalableUI</a></h3>
<a name="l00048"></a>00048 The program takes screen parameters in the start of the application and works with all screen modes. The program supports changing the screen layout <span class="keywordflow">while</span> the program is running. Note that <span class="keyword">this</span> support must be coded in the application and <span class="keyword">this</span> code resides in the <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_hello_world_basic_app_view.html#9f9bb5a2110532e2f2909eaefb44d36a"</span>><a class="code" href="class_c_hello_world_basic_app_view.html#aca7c3b8a59edd4f59b8923e2a89a7fc3">CHelloWorldBasicAppView::SizeChanged</a>()</a> method.<h3><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub33"</span>>
<a name="l00049"></a>00049 3.3 Static structure</a></h3>
<a name="l00050"></a>00050 All the classes are derived from CBase. CBase has a number of useful features: it initialises all member data to zero, it has a <span class="keyword">virtual</span> destructor, and it implements support <span class="keywordflow">for</span> the Symbian OS cleanup stack.<h3><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub34"</span>>
<a name="l00051"></a>00051 3.4 Launch sequence and command handling</a></h3>
<a name="l00052"></a>00052 This section explains the sequence of interactions that occur on the objects described in the last section when the application is run and the user selects the Hello menu option. The following sections describe the steps in more detail.<p>
<a name="l00053"></a>00053 <ol type=1>
<a name="l00054"></a>00054 <li>The application is launched, the framework loads the application EXE and the E32Main() method implemented in <a class="el" href="helloworldbasic_8cpp-source.html">helloworldbasic.cpp</a> is called. Read more from <a class="el" href="index.html<span class="preprocessor">#Sub341">3.4.1 Creating the Application object</a>. <br></span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><br>
<a name="l00056"></a>00056 </li><li>E32Main() method calls the function NewApplication(). This creates an instance of the HelloWorldApplication class, and returns a pointer to it. The framework subsequently uses this pointer to complete construction of the application. <br>
<a name="l00057"></a>00057 <br>
<a name="l00058"></a>00058 </li><li>The framework calls virtual function AppDllUid() (implementation <a class="el" href="class_c_hello_world_basic_application.html<span class="preprocessor">#266a6db7f5728454ee8b7a9c5f517dca">CHelloWorldBasicApplication::AppDllUid</a>) to get the UID of this particular application. The UID is used to, for example, check if an instance of the application is already running, so than the existing instance can be switched to, rather than a new instance created. Read more from <a class="el" href="index.html#Sub342">3.4.2 Getting the application's UID</a>. <br></span>
<a name="l00059"></a>00059 <span class="preprocessor"></span><br>
<a name="l00060"></a>00060 </li><li>The framework calls <span class="keyword">virtual</span> function CreateDocumentL on the CHelloWorldApplication <span class="keywordtype">object</span>: <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_hello_world_basic_application.html#0a048c97a8c1868d0e1e5daf2838bcab"</span>><a class="code" href="class_c_hello_world_basic_application.html#aaa57f357e3ce5464fd4f6785864eadfe">CHelloWorldBasicApplication::CreateDocumentL</a></a>. This creates an instance of the application Document and returns a pointer to it. This allows the framework to call certain Document methods directly. The Document <span class="keywordtype">object</span> is constructed <span class="keyword">using</span> the Symbian OS construction sequence, <span class="keyword">using</span> the Document <span class="keywordtype">object</span><span class="stringliteral">'s static method NewL. Read more from <a class="el" href="index.html#Sub343">3.4.3 Creating the Document object</a>. <br></span>
<a name="l00061"></a>00061 <span class="stringliteral"><br></span>
<a name="l00062"></a>00062 <span class="stringliteral"></li><li>The framework calls AppDllUid again, to see if it is necessary to load a file from the filing system. The HelloWorld example does not need to persist any information, and so does not have a file associated with it. <br></span>
<a name="l00063"></a>00063 <span class="stringliteral"><br></span>
<a name="l00064"></a>00064 <span class="stringliteral"></li><li>The framework calls the Document object'</span>s CreateAppUiL method: <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_hello_world_basic_document.html#0eb34f98d849338274127e28e8c78b4e"</span>><a class="code" href="class_c_hello_world_basic_document.html#ac2579614da65e8b1ba74cc5cb525f19d">CHelloWorldBasicDocument::CreateAppUiL</a></a>. This creates the AppUI <span class="keywordtype">object</span> and returns a pointer to it. <br>
<a name="l00065"></a>00065 <br>
<a name="l00066"></a>00066 </li><li>The framework completes the construction of the AppUI <span class="keywordtype">object</span> by calling its ConstructL method (<a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_hello_world_basic_app_ui.html#9ce34ba0b947863222da3c63d0481044"</span>>CHelloWorldBasicAppUi::ConstructL</a>). The fact the framework calls the AppUi <span class="keywordtype">object</span><span class="stringliteral">'s constructor and ConstructL separately allows the framework to complete any necessary initialisation before construction of the AppUI object is completed. Read more from <a class="el" href="index.html#Sub344">3.4.4 Creating the AppUI and View objects</a>. <br></span>
<a name="l00067"></a>00067 <span class="stringliteral"><br></span>
<a name="l00068"></a>00068 <span class="stringliteral"></li><li>The <a class="el" href="class_c_hello_world_basic_app_ui.html#9ce34ba0b947863222da3c63d0481044">CHelloWorldBasicAppUi::ConstructL</a> method first calls the base class'</span>s BaseConstructL. This performs such tasks as reading the resource file associated with an application. <br>
<a name="l00069"></a>00069 <br>
<a name="l00070"></a>00070 </li><li>The AppUi calls <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_hello_world_basic_app_view.html#5891ab00f23b517058efe213c1febfd2"</span>><a class="code" href="class_c_hello_world_basic_app_view.html#af938676f7eee65925c90b654b5a5034f">CHelloWorldBasicAppView::NewL</a></a> to create the AppView object, <span class="keyword">using</span> Symbian two phase construction. <br>
<a name="l00071"></a>00071 <br>
<a name="l00072"></a>00072 </li><li>The framework calls the Draw (<a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_hello_world_basic_app_view.html#67f946ca7848ec78de4961c5bcefdb72"</span>>CHelloWorldBasicAppView::Draw</a>) method to draw the view. In this case it will cause a blank screen to be displayed. Read more from <a class="el" href="index.html<span class="preprocessor">#Sub345">3.4.5 Redrawing the screen</a>. <div align="center"></span>
<a name="l00073"></a>00073 <span class="preprocessor"></span><img src=<span class="stringliteral">"application_started.png"</span> alt=<span class="stringliteral">"application_started.png"</span>>
<a name="l00074"></a>00074 </div>
<a name="l00075"></a>00075 </li><li>Whenever the user selects a menu option, <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"class_c_hello_world_basic_app_ui.html#a682d228622cea7790645ce10f591242"</span>>CHelloWorldBasicAppUi::HandleCommandL</a> is called by the framework and is passed an argument, aCommand, that indicates the command the user selected. The AppUI can then perform whatever actions are required <span class="keywordflow">for</span> that particular menu option: <div align=<span class="stringliteral">"center"</span>>
<a name="l00076"></a>00076 <img src=<span class="stringliteral">"application_menu.png"</span> alt=<span class="stringliteral">"application_menu.png"</span>>
<a name="l00077"></a>00077 </div>
<a name="l00078"></a>00078 <ol type=a>
<a name="l00079"></a>00079 <li>In <span class="keywordflow">case</span> of <span class="stringliteral">"Hello"</span>, it creates an Information note with the text specified in resource file in it, and displays it.</li><li>In <span class="keywordflow">case</span> of <span class="stringliteral">"Hello from file"</span>, it reads text from Hello.txt -file and displays it in Information note.</li><li>In <span class="keywordflow">case</span> of <span class="stringliteral">"Hello from edit"</span>, it asks text from the user with a dialog and displays it on the screen.</li></ol>
<a name="l00080"></a>00080 </li></ol>
<a name="l00081"></a>00081 <h4><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub341"</span>>
<a name="l00082"></a>00082 3.4.1 Creating the Application <span class="keywordtype">object</span></a></h4>
<a name="l00083"></a>00083 It is important to note that the NewApplication method is exported by the EXE. This is achieved by adding the EXPORT_C directive before <span class="keyword">this</span> function in the <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"helloworldbasic_8cpp-source.html"</span>>helloworldbasic.cpp</a> file. If the EXPORT_C directive is missing, the code will fail to link.<p>
<a name="l00084"></a>00084 The framework calls the function that is exported by the application at ordinal 1 in the DLL. This means that the first function defined in the DEF-file <span class="keywordflow">for</span> an application must be the NewApplication method. By <span class="keywordflow">default</span>, the tool chain automatically ensures that <span class="keyword">this</span> is the <span class="keywordflow">case</span> <span class="keywordflow">for</span> a Symbian OS application.<p>
<a name="l00085"></a>00085 Note that <span class="keyword">this</span> construction does not use the usual Symbian OS <span class="keyword">new</span> (ELeave) method, but the C++ style <span class="keyword">new</span> method. This is because a TRAP harness has not been created <span class="keywordflow">for</span> the application at <span class="keyword">this</span> point. If the system is unable to allocate memory <span class="keywordflow">for</span> a <span class="keyword">new</span> instance of the application, the returned instance pointer will be NULL. The framework checks <span class="keywordflow">for</span>, and copes with, <span class="keyword">this</span> possibility.<h4><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub342"</span>>
<a name="l00086"></a>00086 3.4.2 Getting the application<span class="stringliteral">'s UID</a></h4></span>
<a name="l00087"></a>00087 <span class="stringliteral">AppDllUid which gets the application'</span>s UID must be present, or the application will fail to link.<h4><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub343"</span>>
<a name="l00088"></a>00088 3.4.3 Creating the Document object</a></h4>
<a name="l00089"></a>00089 The Application <span class="keywordtype">object</span> is responsible <span class="keywordflow">for</span> creating an instance of the Document <span class="keywordtype">object</span>. However, it is not required to destroy it. Destruction of the Document <span class="keywordtype">object</span> is performed by the framework.<h4><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub344"</span>>
<a name="l00090"></a>00090 3.4.4 Creating the AppUI and View objects</a></h4>
<a name="l00091"></a>00091 Note that creation of the AppUi <span class="keywordtype">object</span> does not use the Symbian OS two phase construction sequence. Instead the C++ constructor is called, and a pointer to the created instance is returned to the framework. The framework completes construction by calling ConstructL later. Ownership of the AppUI is passed to the framework, and so the Document <span class="keywordtype">object</span> is not responsible <span class="keywordflow">for</span> destroying it.<h4><a <span class="keyword">class</span>=<span class="stringliteral">"anchor"</span> name=<span class="stringliteral">"Sub345"</span>>
<a name="l00092"></a>00092 3.4.5 Redrawing the screen</a></h4>
<a name="l00093"></a>00093 The Draw method is called by the framework when the view needs to be redrawn, and contains all the code necessary to draw the view <span class="keywordflow">for</span> <span class="keyword">this</span> application. Note that the framework only calls the Draw method in response to general system events. So, <span class="keywordflow">for</span> example, the framework automatically calls Draw when the application is launched, when the Options menu disappears, and <span class="keywordflow">if</span> the application regains focus.<p>
<a name="l00094"></a>00094 The programmer cannot call the Draw method directly, as it requires the system<span class="stringliteral">'s graphics context to be activated before it is called. Instead, if the programmer wishes to have the screen redrawn, they should call the DrawNow method.<p></span>
<a name="l00095"></a>00095 <span class="stringliteral">Note that the Draw function cannot leave. This is because the function may be called directly by the framework, and the framework would not know how to handle any errors that might occur. Instead the Draw function must TRAP and handle any errors that might occur.<h4><a class="anchor" name="Sub346"></span>
<a name="l00096"></a>00096 <span class="stringliteral">3.4.6 Handling commands</a></h4></span>
<a name="l00097"></a>00097 <span class="stringliteral"><a class="el" href="class_c_hello_world_basic_app_ui.html#a682d228622cea7790645ce10f591242">HandleCommandL </a> is called on the AppUi object whenever the user selects a menu option. The argument aCommand indicates the command the user selected. HandleCommandL typically takes the form of a switch statement which invokes different actions according to the value of aCommand.<p></span>
<a name="l00098"></a>00098 <span class="stringliteral"><b>Handling command "Hello"</b><p></span>
<a name="l00099"></a>00099 <span class="stringliteral"><ul></span>
<a name="l00100"></a>00100 <span class="stringliteral"><li>string is loaded from the resource file with StringLoader</li><li>Information note is shown from the descriptor</li></ul></span>
<a name="l00101"></a>00101 <span class="stringliteral"><p></span>
<a name="l00102"></a>00102 <span class="stringliteral"><div align="center"></span>
<a name="l00103"></a>00103 <span class="stringliteral"><img src="information_note.png" alt="information_note.png"></span>
<a name="l00104"></a>00104 <span class="stringliteral"></div></span>
<a name="l00105"></a>00105 <span class="stringliteral"><p></span>
<a name="l00106"></a>00106 <span class="stringliteral"><b>Handling command "Hello from file"</b><p></span>
<a name="l00107"></a>00107 <span class="stringliteral"><ul></span>
<a name="l00108"></a>00108 <span class="stringliteral"><li>connection to the file server is opened with RFs</li><li>RFile is used to open "Hello.txt"-file for reading</li><li>A RFileStream object is created from the file</li><li>An HBufC descriptor is created from the RFileReadStream object</li><li>The descriptor reads from the stream both the length of the data followed by the data. After this descriptor has been read the stream will be positioned at the beginning of the data.</li><li>Information note is shown from the descriptor</li></ul></span>
<a name="l00109"></a>00109 <span class="stringliteral"><p></span>
<a name="l00110"></a>00110 <span class="stringliteral"><dl compact><dt><b>Note:</b></dt><dd>"Hello.txt"-file, which is read during the execution of this command, is actually created by the application itself during the execution of <a class="el" href="class_c_hello_world_basic_app_ui.html#9ce34ba0b947863222da3c63d0481044">CHelloWorldBasicAppUi::ConstructL</a>. In other words, it is not an exported ready-made file. The reason for this is that HelloWorld is localized to different languages; and thus during start-up the file is created and the text is written into it with the current language.</dd></dl></span>
<a name="l00111"></a>00111 <span class="stringliteral"><div align="center"></span>
<a name="l00112"></a>00112 <span class="stringliteral"><img src="japanese_hello.png" alt="japanese_hello.png"></span>
<a name="l00113"></a>00113 <span class="stringliteral"></div></span>
<a name="l00114"></a>00114 <span class="stringliteral"><p></span>
<a name="l00115"></a>00115 <span class="stringliteral"><b>Handling command "Hello from edit"</b><p></span>
<a name="l00116"></a>00116 <span class="stringliteral"><ul></span>
<a name="l00117"></a>00117 <span class="stringliteral"><li>a string is loaded from the resource file with StringLoader</li><li><a class="el" href="class_c_hello_world_query_dialog.html">CHelloWorldQueryDialog</a> is created and the loaded string is passed to it to be used as default value for input and also a descriptor is passed to store the input given by the user</li><li>no other actions are made, but the text will be displayed in the screen, when the framework calls <a class="el" href="class_c_hello_world_basic_app_view.html#67f946ca7848ec78de4961c5bcefdb72">Draw </a>.</li></ul></span>
<a name="l00118"></a>00118 <span class="stringliteral"><p></span>
<a name="l00119"></a>00119 <span class="stringliteral"><div align="center"></span>
<a name="l00120"></a>00120 <span class="stringliteral"><img src="dialog.png" alt="dialog.png"></span>
<a name="l00121"></a>00121 <span class="stringliteral"></div></span>
<a name="l00122"></a>00122 <span class="stringliteral"><h3><a class="anchor" name="Sub35"></span>
<a name="l00123"></a>00123 <span class="stringliteral">3.5 Handling key events</a></h3></span>
<a name="l00124"></a>00124 <span class="stringliteral">If the application is required to respond to user keypresses, the AddToStackL method must be called by the AppUi object'</span>s ConstructL method, with the AppView <span class="keywordtype">object</span> as an argument. This adds the AppView <span class="keywordtype">object</span> to the control stack.<p>
<a name="l00125"></a>00125 If the view is on the control stack, then whenever the user presses a key the OfferKeyEventL method is called. This has arguments that indicate the type of key event (key down, key press or key up) as well as the code of the key pressed.<p>
<a name="l00126"></a>00126 When the AppUi <span class="keywordtype">object</span> is destroyed, the AppView must be removed from the stack. This is done by calling RemoveFromStack in the AppUi <span class="keywordtype">object</span><span class="stringliteral">'s destructor.<h3><a class="anchor" name="Sub36"></span>
<a name="l00127"></a>00127 <span class="stringliteral">3.6 Localization</a></h3></span>
<a name="l00128"></a>00128 <span class="stringliteral">HelloWorld application is localized for English, Finnish, Chinese and Japanese. The "main" rls-file HelloWorldBasic.rls includes language specific rls-files, which all each define the same resource strings in specific language. The localized rls-files contain language id in their name (enum TLanguage in e32const.h specifies language identification values), for example: HelloWorldBasic_32.rls.<p></span>
<a name="l00129"></a>00129 <span class="stringliteral">When localizing to languages, which do not use Western alphabets, such as Chinese or Japanese, a couple of additional steps needs to be taken. As the language cannot be written in ASCII, the language-specific rls-file has to<ul></span>
<a name="l00130"></a>00130 <span class="stringliteral"><li>be written in UTF-8 format, and</li><li>contain a line CHARACTER_SET UTF8.</li></ul></span>
<a name="l00131"></a>00131 <span class="stringliteral"><p></span>
<a name="l00132"></a>00132 <span class="stringliteral"><dl compact><dt><b>Note:</b></dt><dd>Certain editors add some "meta-bytes" into the beginning of file stored in UTF-format. Unfortunately Symbian'</span>s resource compiler RCOMP cannot deal with those additional bytes and resource file compilation will fail. It you encounter <span class="keyword">this</span>, you have to <span class="keyword">remove</span> those additional bytes with some other editor.</dd></dl>
<a name="l00133"></a>00133 Furthermore, localization affects mmp- and pkg-files also:<ul>
<a name="l00134"></a>00134 <li>languages need to be defined in mmp-file. See LANG in <a <span class="keyword">class</span>=<span class="stringliteral">"el"</span> href=<span class="stringliteral">"helloworldbasic_8mmp-source.html"</span>>HelloWorldBasic.mmp</a>.</li><li>languages need to be defined in pkg-files and language dependent resource files have to be listed. In addition, most of the strings (e.g. component name) are required to be localized <span class="keywordflow">for each</span> defined language. See S60 SDK Help <span class="stringliteral">"Package file format"</span> <span class="keywordflow">for</span> more detailed information.</li></ul>
<a name="l00135"></a>00135 <p>
<a name="l00136"></a>00136 Additionally, HelloWorld application<span class="stringliteral">'s pkg-files demonstrate two ways to install localized application:<ul></span>
<a name="l00137"></a>00137 <span class="stringliteral"><li>the language is determined during installation - and only the determined language is installed (the application'</span>s language does not change, even <span class="keywordflow">if</span> the language in the phone is changed). <br>
<a name="l00138"></a>00138  HelloWorldBasic_gcce.pkg is made in <span class="keyword">this</span> fashion.</li><li>the language is determined during installation, but all the supported languages are installed. If the language in the phone changes, the language of the HelloWorld-application changes also, <span class="keywordflow">if</span> it supports the <span class="keyword">new</span> language (English otherwise). <br>
<a name="l00139"></a>00139  HelloWorldBasic_armv5.pkg is made in <span class="keyword">this</span> fashion. </li></ul>
<a name="l00140"></a>00140 <hr>
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <table x-use-null-cells
<a name="l00143"></a>00143                 style=<span class="stringliteral">"x-cell-content-align: top;</span>
<a name="l00144"></a>00144 <span class="stringliteral">                                width: 100%;</span>
<a name="l00145"></a>00145 <span class="stringliteral">                                border-spacing: 0px;</span>
<a name="l00146"></a>00146 <span class="stringliteral">                                border-spacing: 0px;"</span>
<a name="l00147"></a>00147                 cellspacing=0
<a name="l00148"></a>00148                 width=100%>
<a name="l00149"></a>00149   <col style=<span class="stringliteral">"width: 50%;"</span>>
<a name="l00150"></a>00150   <col style=<span class="stringliteral">"width: 50%;"</span>>
<a name="l00151"></a>00151 
<a name="l00152"></a>00152   <tr style=<span class="stringliteral">"x-cell-content-align: top;"</span>
<a name="l00153"></a>00153         valign=top>
<a name="l00154"></a>00154   <td style=<span class="stringliteral">"width: 50%;</span>
<a name="l00155"></a>00155 <span class="stringliteral">                        padding-right: 10px;</span>
<a name="l00156"></a>00156 <span class="stringliteral">                        padding-left: 10px;</span>
<a name="l00157"></a>00157 <span class="stringliteral">                        border-right-style: None;</span>
<a name="l00158"></a>00158 <span class="stringliteral">                        border-left-style: None;</span>
<a name="l00159"></a>00159 <span class="stringliteral">                        border-top-style: None;</span>
<a name="l00160"></a>00160 <span class="stringliteral">                        border-bottom-style: None;"</span>
<a name="l00161"></a>00161         width=50%>
<a name="l00162"></a>00162   <p style=<span class="stringliteral">"font-family: Arial;"</span>><small style=<span class="stringliteral">"font-size: smaller;"</span>> Nokia 2009</small></td>
<a name="l00163"></a>00163   <td style=<span class="stringliteral">"width: 50%;</span>
<a name="l00164"></a>00164 <span class="stringliteral">                        padding-right: 10px;</span>
<a name="l00165"></a>00165 <span class="stringliteral">                        padding-left: 10px;</span>
<a name="l00166"></a>00166 <span class="stringliteral">                        border-top-style: None;</span>
<a name="l00167"></a>00167 <span class="stringliteral">                        border-bottom-style: None;</span>
<a name="l00168"></a>00168 <span class="stringliteral">                        border-right-style: None;"</span>
<a name="l00169"></a>00169         width=50%>
<a name="l00170"></a>00170   <p style=<span class="stringliteral">"text-align: right; margin-right: -4px;"</span>
<a name="l00171"></a>00171         align=right><span style=<span class="stringliteral">"font-weight: bold;"</span>><a href=<span class="stringliteral">"#Top"</span>
<a name="l00172"></a>00172                                                                                                         title=<span class="stringliteral">"Back to top"</span>><img
<a name="l00173"></a>00173  src=<span class="stringliteral">"top.gif"</span>
<a name="l00174"></a>00174         x-maintain-ratio=TRUE
<a name="l00175"></a>00175         alt=<span class="stringliteral">"Back to top"</span>
<a name="l00176"></a>00176         style=<span class="stringliteral">"border: none;</span>
<a name="l00177"></a>00177 <span class="stringliteral">                        width: 18px;</span>
<a name="l00178"></a>00178 <span class="stringliteral">                        height: 15px;</span>
<a name="l00179"></a>00179 <span class="stringliteral">                        float: none;</span>
<a name="l00180"></a>00180 <span class="stringliteral">                        border-style: none;</span>
<a name="l00181"></a>00181 <span class="stringliteral">                        border-style: none;"</span>
<a name="l00182"></a>00182         width=18
<a name="l00183"></a>00183         height=15
<a name="l00184"></a>00184         border=0></a></span></td></tr>
<a name="l00185"></a>00185  </table>
<a name="l00186"></a>00186 </body>
<a name="l00187"></a>00187 </html>
<a name="l00188"></a>00188 
</pre></div>
<hr size="1"></hr><address style="text-align: right;"><small>Generated by 
<a href="https://web.archive.org/web/20110000000000*/http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"></img></a> 1.6.2 </small></address>
     <p class="copyright">Copyright ©2010 Nokia Corporation and/or its subsidiary(-ies).<br></br> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>
